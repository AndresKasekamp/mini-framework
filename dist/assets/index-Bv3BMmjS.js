(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}})();function L(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function A(e,t,o,n,s){const r="todo-app-mvc";function a(u,f,c){localStorage.setItem(r,JSON.stringify(u)),L(c);const g=o(u,f);c.appendChild(g)}function i(u,f,c){return()=>{c=JSON.parse(localStorage.getItem(r));const g=t(u,c,f);a(g,i,n)}}e=JSON.parse(localStorage.getItem(r))||e,a(e,i,n),s&&typeof s=="function"&&s(i)}function O(e,t){return e&&Array.isArray(e)&&e.length>0&&e.forEach(o=>{if(typeof o=="function")return t.onclick=o,t;const n=o.split("=");switch(n[0]){case"autofocus":t.autofocus="autofocus",t.focus(),setTimeout(function(){t.focus()},200);break;case"checked":t.setAttribute("checked",!0);case"class":t.className=n[1];break;case"data-id":t.setAttribute("data-id",n[1]);break;case"for":t.setAttribute("for",n[1]);break;case"href":t.href=n[1];break;case"id":t.id=n[1];break;case"placeholder":t.placeholder=n[1];break;case"style":t.setAttribute("style",n[1]);break;case"type":t.setAttribute("type",n[1]);break;case"value":t.value=n[1]}}),t}function S(e,t){return Array.isArray(e)&&e.length>0&&e.forEach(o=>t.appendChild(o)),t}function l(e,t,o){return S(o,O(t,document.createElement(e)))}function b(e,t){return l("section",e,t)}function E(e,t){return l("a",e,t)}function k(e,t){return l("button",e,t)}function T(e,t){return l("div",e,t)}function N(e,t){return l("footer",e,t)}function D(e,t){return l("header",e,t)}function R(e,t){return l("h1",e,t)}function p(e,t){return l("input",e,t)}function w(e,t){return l("label",e,t)}function h(e,t){return l("li",e,t)}function y(e,t){return l("span",e,t)}function m(e){var t=document.createElement("strong");return t.innerHTML=e,t}function d(e){return document.createTextNode(e)}function C(e,t){return l("ul",e,t)}class I{constructor(t){this.routes=t||{},this.currentRoute=null,window.addEventListener("popstate",()=>{this.handleRouteChange(window.location.pathname)}),this.handleRouteChange(window.location.pathname)}navigate(t){window.history.pushState(null,null,t),this.handleRouteChange(t)}handleRouteChange(){const t=window.location.hash;if(this.currentRoute!=t){const o=this.routes[t]||this.routes["*"];o?(this.currentRoute=t,o()):console.error(`No route found for ${t}`)}}}function v(e,t,o){const n=JSON.parse(JSON.stringify(t));switch(e){case"ADD":const r=typeof t.todos<"u"&&t.todos.length>0?t.todos[t.todos.length-1]:null;var s=r?r.id+1:1;const a=document.getElementById("new-todo");n.todos=n.todos&&n.todos.length>0?n.todos:[],n.todos.push({id:s,title:o||a.value.trim(),done:!1});break;case"TOGGLE":n.todos.forEach(c=>{c.id===o&&(c.done=!c.done)});const i=n.todos.filter(c=>c.done===!1).length;n.allDone=i===0;break;case"TOGGLE_ALL":n.allDone=!n.allDone,n.todos.forEach(c=>{c.done=n.allDone});break;case"DELETE":n.todos=n.todos.filter(c=>c.id!==o);break;case"EDIT":n.clicked&&n.clicked===o&&Date.now()-300<n.clickTime?n.editing=o:(n.clicked=o,n.clickTime=Date.now(),n.editing=!1);break;case"SAVE":const u=document.getElementsByClassName("edit")[0],f=u.value;var s=parseInt(u.id,10);if(n.clicked=!1,n.editing=!1,!f||f.length===0)return v("DELETE",n,s);n.todos=n.todos.map(c=>(c.id===s&&f&&f.length>0&&(c.title=f.trim()),c));break;case"CANCEL":n.clicked=!1,n.editing=!1;break;case"CLEAR_COMPLETED":n.todos=n.todos.filter(function(c){return!c.done});break;case"ROUTE":n.hash=window.location.hash;break;default:return t}return n}function M(e,t,o){return h(["data-id="+e.id,"id="+e.id,e.done?"class=completed":"",t&&t.editing&&t.editing===e.id?"class=editing":""],[T(["class=view"],[p([e.done?"checked=true":"","class=toggle","type=checkbox",typeof o=="function"?o("TOGGLE",e.id):""],[]),w([typeof o=="function"?o("EDIT",e.id):""],[d(e.title)]),k(["class=destroy",typeof o=="function"?o("DELETE",e.id):""])])].concat(t&&t.editing&&t.editing===e.id?[p(["class=edit","id="+e.id,"value="+e.title,"autofocus"])]:[]))}function P(e,t){const o="style=display:"+(e.todos&&e.todos.length>0?"block":"none");return b(["class=main","id=main",o],[p(["id=toggle-all","type=checkbox",typeof t=="function"?t("TOGGLE_ALL"):"",e.all_done?"checked=checked":"","class=toggle-all"],[]),w(["for=toggle-all"],[d("Mark all as complete")]),C(["class=todo-list"],e.todos&&e.todos.length>0?e.todos.filter(function(n){switch(e.hash){case"#/active":return!n.done;case"#/completed":return n.done;default:return n}}).map(function(n){return M(n,e,t)}):null)])}function G(e,t){let o=e.todos&&e.todos.length>0?e.todos.filter(function(i){return i.done}).length:0,n=e.todos&&e.todos.length>0?e.todos.filter(function(i){return!i.done}).length:0,s=n>0||o>0?"block":"none";o=e.todos&&e.todos.length>0?e.todos.length-n:0;let r=o>0?"block;":"none;",a=" item"+(n>1||n===0?"s":"")+" left";return N(["class=footer","id=footer","style=display:"+s],[y(["class=todo-count","id=count"],[m(n),d(a)]),C(["class=filters"],[h([],[E(["href=#/","id=all","class="+(e.hash==="#/"?"selected":"")],[d("All")])]),h([],[E(["href=#/active","id=active","class="+(e.hash==="#/active"?"selected":"")],[d("Active")])]),h([],[E(["href=#/completed","id=completed","class="+(e.hash==="#/completed"?"selected":"")],[d("Completed")])])]),k(["class=clear-completed","style=display:"+r,typeof t=="function"?t("CLEAR_COMPLETED"):""],[d("Clear completed ["),y(["id=completed-count"],[d(o)]),d("]")])])}function _(e,t){return b(["class=todoapp"],[D(["class=header"],[R([],[d("todos")]),p(["id=new-todo","class=new-todo","placeholder=What needs to be done?","autofocus"],[])]),P(e,t),G(e,t)])}function B(e){const t="Enter",o="Escape";document.addEventListener("keyup",function(r){switch(r.key){case t:a();break;case o:e("CANCEL")();break}function a(){const i=document.getElementsByClassName("editing"),u=document.getElementById("new-todo");i&&i.length>0&&e("SAVE")(),u.value.trim().length>0&&(e("ADD")(),u.value="",u.focus())}}),new I({"#/":()=>e("ROUTE")(),"#/active":()=>e("ROUTE")(),"#/completed":()=>e("ROUTE")(),"*":()=>console.error(`No route found for ${path}`)}).navigate(window.location.hash)}class J{constructor(t){this.state=t,this.onStateChange=null}setState(t){this.state=t,typeof this.onStateChange=="function"&&this.onStateChange(this.state)}setOnStateChange(t){this.onStateChange=t}}const K=new J({todos:[],hash:"#/"}),x=document.getElementById("app");A(K,v,_,x,B);
